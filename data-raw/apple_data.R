library(appler)

# iTunes web --------------------------------------------------------------

# https://music.apple.com/ca/browse
# https://music.apple.com/ca/album/get-rollin/1642697894
# https://music.apple.com/ca/artist/nickelback/5280361
# https://music.apple.com/ca/artist/<artist-name>  fails

# Browse Categories > Hits
# https://music.apple.com/ca/curator/apple-music-hits/1526756058
# Hot Tracks        https://music.apple.com/room/1532292351
# New Releases      https://music.apple.com/room/1532292352
# Artist Playlist   https://music.apple.com/room/1532292353
# Hits of the 2010s https://music.apple.com/room/1532292355
# Hits of the '00s  https://music.apple.com/room/1532292356
# Hits of the 90s   https://music.apple.com/room/1532292357
# Essential Albums  https://music.apple.com/room/1532292578

# Browser Categories > Charts
# https://music.apple.com/ca/browse/top-charts
# Top Songs   https://music.apple.com/ca/browse/top-charts/songs/

# --- sample of some artists for quick use for users
apple_artists <- data.frame(
  artist = c(
    "Nickelback",
    "Shania Twain",
    "Michael Jackson",
    "Michael Bublé",
    "Tegan and Sara",
    "Lizzo",
    "Madonna",
    "Lady Gaga",
    "Celine Dion",
    "Coldplay"
  ),
  artist_id = c(
    5280361,
    129974,
    32940,
    799597,
    3204427,
    472949623,
    20044,
    277293880,
    63729,
    471744
  )
)

# --- use the dataset to get artist id
lizzo <- apple_artists[apple_artists$artist == "Lizzo", ]
lizzo_id <- lizzo$artist_id
lizzo_name <- lizzo$artist

# --- use the artist name and id from the dataset for search
artist_by_name <- search_apple(term = lizzo_name, country = "ca", lang = "en")
artist_by_id <- lookup_apple(id = lizzo_id, country = "ca", sort = "recent")

# --- check the data
head(artist_by_name)
head(artist_by_id)

# Apple app store ---------------------------------------------------------

# Develop > Top Free Apps (iPhone)
# ---- the id is the same if iPad is chosen, just the order or app popularity changes
# ---- 210 apps mostly from Top App selections by category

apple_apps <- data.frame(
  app_name = c(
    "Xcode",
    "TestFlight",
    "Termius",
    "HTML Viewer",
    "Kodex",
    "CodeSnack IDE",
    "Python3IDE",
    "Pyto-Python 3",
    "iSH Shell",
    "Modulus Calculator",
    "Scriptable",
    "Runestone Text Editor",
    "Working Copy - Git client",
    "Downie!",
    "Replit: Code anything",
    "Apple Developer",
    "iTunes Remote",
    "Shazam: Music Discovery",
    "Keynote",
    "Numbers",
    "Pages",
    "Apple Books",
    "Apple Store",
    "iMovie",
    "GarageBand",
    "AirPort Utility",
    "Find My Friends",
    "Apple Podcasts",
    "Shortcuts",
    "Clips",
    "iTunes Movie Trailers",
    "Beats Pill⁺",
    "Texas Hold’em",
    "App Store Connect",
    "Logic Remote",
    "Apple Music for Artists",
    "Reality Composer",
    "data-jar",
    "Geekbench ML",
    "OctoPod for OctoPrint",
    "Ad Blocker by Magic Lasso",
    "Twitter",
    "BuzzFeed - Quiz, Trivia & News",
    "Axios: Smart Brevity news",
    "Quora",
    "Reddit",
    "Bloomberg: Business News Daily",
    "Washington Post",
    "The New Yorker",
    "POLITICO",
    "The Wall Street Journal",
    "AP News",
    "LA Times",
    "The Atlantic Magazine",
    "The Guardian - Live World News",
    "USA TODAY: US & Breaking News",
    "Reuters News",
    "NPR",
    "HuffPost - News & Politics",
    "BBC World Service",
    "Insider - Business News & More",
    "NPR One",
    "CBS News: Live Breaking News",
    "The Daily Beast App",
    "Substack Reader",
    "CNN: Breaking US & World News",
    "TIME Magazine",
    "Seattle Times Mobile",
    "The Globe and Mail",
    "Flipboard: News for our time",
    "Slate.com",
    "Google News",
    "CNET: News, Advice & Deals",
    "Microsoft Teams",
    "Zoom - One Platform to Connect",
    "LinkedIn: Job Search & News",
    "Indeed Job Search",
    "Adobe Acrobat Reader PDF Maker",
    "Google Meet (original)",
    "Uber Driver",
    "ADP Mobile Solutions",
    "WhatsApp Business",
    "DoorDash - Dasher",
    "Shopify - Ecommerce Business",
    "Slack",
    "SkipTheDishes - Deliver & Earn",
    "UPS Mobile",
    "Interac verification service",
    "FedEx Mobile",
    "Purolator",
    "QuickBooks Accounting",
    "Lyft Driver",
    "Sell on Etsy",
    "Amazon Business",
    "Amazon A to Z",
    "Workplace Chat from Meta",
    "Facebook",
    "Messenger",
    "Telegram Messenger",
    "Duolingo - Language Lessons",
    "Photomath",
    "Google Classroom",
    "Babbel - Language Learning",
    "Udemy Online Video Courses",
    "DataCamp: Learn Data Science",
    "edX: Harvard, MIT, UBC Courses",
    "Coursera: Learn career skills",
    "Brilliant: Learn interactively",
    "O'Reilly",
    "Codecademy Go",
    "Skillshare - Online Classes",
    "Simplilearn: Online Courses",
    "Crash Course - Watch and Study",
    "Khan Academy",
    "Lumosity: Brain Training",
    "TikTok",
    "Netflix",
    "Amazon Prime Video",
    "Disney+",
    "SCENE+",
    "Paramount+",
    "Ticketmaster－Buy, Sell Tickets",
    "The Roku App (Official)",
    "Crave",
    "Eventbrite",
    "PlayStation App",
    "Xbox",
    "Steam Mobile",
    "discovery+ | Stream TV Shows",
    "CTV",
    "Google TV: Watch Movies and TV",
    "CBC Gem: Shows & Live TV",
    "Global TV",
    "IMDb",
    "PayPal",
    "CIBC Mobile Banking",
    "RBC Mobile",
    "TD Canada",
    "Scotiabank",
    "BMO Mobile Banking",
    "Wealthsimple",
    "PC Financial Mobile",
    "Amex Canada",
    "Capital One Canada",
    "Uber Eats: Food Delivery",
    "Tim Hortons",
    "DoorDash - Food Delivery",
    "McDonald's Canada",
    "SkipTheDishes - Food Delivery",
    "Starbucks",
    "SUBWAY",
    "Nespresso",
    "Domino's Canada",
    "Wendy’s Canada",
    "KFC Canada",
    "Burger King Canada",
    "HelloFresh: Easy Meal Planner",
    "A&W",
    "Yelp: Local Food & Services",
    "Dairy Queen",
    "Pizza Hut Canada",
    "Popeyes Canada",
    "Harvey's",
    "Mary Brown’s Chicken",
    "7-Eleven, Inc",
    "Pizza Pizza",
    "COBS Bread",
    "Little Caesars - Pizza",
    "Swiss Chalet",
    "Boston Pizza",
    "Booster Juice To Go",
    "Safeway",
    "Freshii Orders",
    "Pizza 73",
    "M&M Food Market Rewards",
    "Fitbit: Health & Fitness",
    "MyFitnessPal: Calorie Counter",
    "Flo Period Tracker & Calendar",
    "Calm: Sleep & Meditation",
    "FitOn Workouts & Fitness Plans",
    "Peloton: Fitness & Workouts",
    "PC Health",
    "Pinterest",
    "Google Home",
    "Amazon Alexa",
    "Tinder - Dating & New Friends",
    "SmartThings",
    "Bumble: Dating, Friends & Bizz",
    "Hinge: Dating & Relationships",
    "iRobot Home",
    "REALTOR.ca Real Estate & Homes",
    "eharmony dating & real love",
    "Discord - Chat, Talk & Hangout",
    "WhatsApp Messenger",
    "Wizz - Make new friends",
    "Signal - Private Messenger",
    "TextNow: Call + Text Unlimited",
    "Google Meet",
    "WeChat",
    "Mastodon for iPhone and iPad",
    "Grindr - Gay Dating & Chat",
    "Meetup: Local groups & events",
    "Google",
    "Google Chrome",
    "Google Authenticator",
    "Google Assistant",
    "Bitmoji",
    "DuckDuckGo Privacy Browser",
    "Bitdefender Mobile Security",
    "Opera Browser: Fast & Private"

  ),
  app_id = c(
    497799835,
    899247664,
    549039908,
    1521187909,
    1038574481,
    1397424959,
    1357215444,
    1436650069,
    1436902243,
    1432356578,
    1405459188,
    1548193893,
    896694807,
    6444461591,
    1614022293,
    640199958,
    284417350,
    284993459,
    361285480,
    361304891,
    361309726,
    364709193,
    375380948,
    377298193,
    408709785,
    427276530,
    466122094,
    525463029,
    915249334,
    1212699939,
    471966214,
    1005829608,
    284602850,
    1234793120,
    638394624,
    1366467972,
    1462358802,
    1453273600,
    1563487010,
    1412557625,
    1260462853,
    333903271,
    352969997,
    1464917429,
    456034437,
    1064216828,
    281941097,
    352509417,
    1081530898,
    358305912,
    364387007,
    364677107,
    373238146,
    397599894,
    409128287,
    504631398,
    602660809,
    324906251,
    306621789,
    1451694511,
    554260576,
    874498884,
    334256223,
    898117224,
    1581650857,
    331786748,
    369021520,
    329502124,
    429228415,
    358801284,
    357555242,
    459182288,
    1553808884,
    1113153706,
    546505307,
    288429040,
    309735670,
    469337564,
    1013231476,
    1131342792,
    444553167,
    1386412985,
    1451754591,
    371294472,
    618783545,
    1500317007,
    336377331,
    1090441769,
    1010729050,
    438701193,
    584606479,
    1203077485,
    860815329,
    1498197033,
    1413909063,
    958124798,
    284882215,
    454638411,
    686449807,
    570060128,
    919087726,
    924620788,
    829587759,
    562413829,
    1263413087,
    945480667,
    736535961,
    913335252,
    881697395,
    1376029326,
    916819843,
    963042747,
    1505594172,
    469863705,
    577232024,
    835599320,
    363590051,
    545519333,
    1446075923,
    1204940340,
    1340650234,
    500003565,
    482066631,
    942568279,
    487922291,
    410896080,
    736179781,
    495369748,
    1498327873,
    461749483,
    746894884,
    422191503,
    404050595,
    342792525,
    283646709,
    351448953,
    407597290,
    358790776,
    341151570,
    429080319,
    1403491709,
    1446078005,
    570685951,
    808215470,
    1058959277,
    1143883086,
    719972451,
    375695000,
    969229981,
    331177714,
    901941015,
    342879434,
    621613017,
    540518599,
    653810744,
    1422864779,
    970107419,
    1236416092,
    284910350,
    1359480496,
    1102570534,
    1536154976,
    1312971866,
    1471545209,
    589653414,
    425026119,
    1551772271,
    992600579,
    587024822,
    904724935,
    1528598899,
    1192758054,
    1027698558,
    451853458,
    1441964667,
    462638897,
    341232718,
    1038369065,
    571800810,
    1442473191,
    792750948,
    1523514712,
    429047995,
    680819774,
    944011620,
    547702041,
    1222822904,
    930441707,
    595287172,
    1012014442,
    408873309,
    458272450,
    985746746,
    310633997,
    1452906710,
    874139669,
    314716233,
    1096918571,
    414478124,
    1571998974,
    319881193,
    375990038,
    284815942,
    535886823,
    388497605,
    1220976145,
    868077558,
    663592361,
    1255893012,
    1411869974
  )
)

# https://apps.apple.com/ca/developer/github/id429758986
# https://apps.apple.com/ca/app/github/id1477376905

# id of app on Apple App store
# -- use the dataset apple_apps to get ids
head(apple_apps)
xcode <- apple_apps[apple_apps$app_name == "Xcode", ]

get_apple_chart_postion(id = xcode$app_id, "ca")

get_apple_rating_split(id = xcode$app_id, country = "ca")

app_reviews <- get_apple_reviews( xcode$app_id, "ca", all_results = TRUE)
head(app_reviews)
